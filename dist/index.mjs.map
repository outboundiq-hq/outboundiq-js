{"version":3,"sources":["../src/types/index.ts","../src/utils/helpers.ts","../src/client/OutboundIQClient.ts","../src/interceptors/fetch.ts","../src/intelligence.ts"],"names":["originalFetch","init"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * Configuration options for the OutboundIQ client\n */\nexport interface OutboundIQConfig {\n  /**\n   * Your OutboundIQ API key\n   * The project is determined from the API key on the backend\n   */\n  apiKey: string;\n\n  /**\n   * @deprecated Project ID is not needed - determined from API key\n   */\n  projectId?: string;\n\n  /**\n   * OutboundIQ ingest endpoint (defaults to production)\n   */\n  endpoint?: string;\n\n  /**\n   * Enable debug logging\n   */\n  debug?: boolean;\n\n  /**\n   * Maximum batch size before auto-flush (default: 10)\n   */\n  batchSize?: number;\n\n  /**\n   * Flush interval in milliseconds (default: 5000)\n   */\n  flushInterval?: number;\n\n  /**\n   * Request timeout in milliseconds (default: 5000)\n   */\n  timeout?: number;\n\n  /**\n   * Patterns to ignore (regex or string)\n   * Requests matching these patterns won't be tracked\n   */\n  ignorePatterns?: (string | RegExp)[];\n\n  /**\n   * Whether to track requests automatically (default: true)\n   */\n  autoTrack?: boolean;\n}\n\n/**\n * User context for tracking who made the API call\n */\nexport interface UserContext {\n  /**\n   * User ID (string or number)\n   */\n  userId?: string | number | null;\n\n  /**\n   * User type/model (e.g., 'User', 'Admin', 'Customer')\n   */\n  userType?: string | null;\n\n  /**\n   * Context type: how the request was made\n   */\n  context?: 'authenticated' | 'anonymous' | 'job' | 'console' | 'api' | 'webhook' | string;\n\n  /**\n   * Additional metadata\n   */\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Represents a tracked API call\n */\nexport interface ApiCall {\n  /**\n   * Unique identifier for this call\n   */\n  id?: string;\n\n  /**\n   * HTTP method (GET, POST, PUT, DELETE, etc.)\n   */\n  method: string;\n\n  /**\n   * Full URL of the request\n   */\n  url: string;\n\n  /**\n   * HTTP status code (0 for network errors)\n   */\n  statusCode: number;\n\n  /**\n   * Request duration in milliseconds\n   */\n  duration: number;\n\n  /**\n   * Request headers (sanitized)\n   */\n  requestHeaders?: Record<string, string>;\n\n  /**\n   * Response headers (sanitized)\n   */\n  responseHeaders?: Record<string, string>;\n\n  /**\n   * Request body (if captured)\n   */\n  requestBody?: string | null;\n\n  /**\n   * Response body (if captured)\n   */\n  responseBody?: string | null;\n\n  /**\n   * Request size in bytes\n   */\n  requestSize?: number;\n\n  /**\n   * Response size in bytes\n   */\n  responseSize?: number;\n\n  /**\n   * User context\n   */\n  userContext?: UserContext | null;\n\n  /**\n   * Timestamp when the request was made\n   */\n  timestamp: string;\n\n  /**\n   * Error message if the request failed\n   */\n  error?: string | null;\n\n  /**\n   * Custom tags\n   */\n  tags?: string[];\n}\n\n/**\n * Batch of API calls to send to OutboundIQ\n */\nexport interface ApiBatch {\n  projectId: string;\n  calls: ApiCall[];\n  sdkVersion: string;\n  runtime: 'node' | 'edge' | 'browser';\n}\n\n/**\n * Headers to always redact for security\n */\nexport const SENSITIVE_HEADERS = [\n  'authorization',\n  'x-api-key',\n  'api-key',\n  'apikey',\n  'x-auth-token',\n  'cookie',\n  'set-cookie',\n  'x-csrf-token',\n  'x-xsrf-token',\n] as const;\n\n/**\n * Default configuration values\n */\nexport const DEFAULT_CONFIG: Required<Omit<OutboundIQConfig, 'apiKey' | 'projectId'>> = {\n  endpoint: 'https://agent.outboundiq.dev/api/metric',\n  debug: false,\n  batchSize: 10,\n  flushInterval: 5000,\n  timeout: 5000,\n  ignorePatterns: [],\n  autoTrack: true,\n};\n\n","import { SENSITIVE_HEADERS } from '../types';\n\n/**\n * Generate a unique ID for tracking\n */\nexport function generateId(): string {\n  return `${Date.now().toString(36)}-${Math.random().toString(36).substring(2, 11)}`;\n}\n\n/**\n * Sanitize headers by redacting sensitive values\n */\nexport function sanitizeHeaders(\n  headers: Headers | Record<string, string> | null | undefined\n): Record<string, string> {\n  if (!headers) return {};\n\n  const result: Record<string, string> = {};\n  const entries = headers instanceof Headers \n    ? Array.from(headers.entries())\n    : Object.entries(headers);\n\n  for (const [key, value] of entries) {\n    const lowerKey = key.toLowerCase();\n    if (SENSITIVE_HEADERS.some(h => lowerKey.includes(h))) {\n      result[key] = '[REDACTED]';\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Safely stringify a body for logging\n */\nexport function safeStringify(body: unknown, maxLength = 10000): string | null {\n  if (body === null || body === undefined) return null;\n  \n  try {\n    if (typeof body === 'string') {\n      return body.length > maxLength ? body.substring(0, maxLength) + '...[truncated]' : body;\n    }\n    \n    if (body instanceof ArrayBuffer || body instanceof Uint8Array) {\n      return `[Binary data: ${body.byteLength} bytes]`;\n    }\n    \n    if (typeof body === 'object') {\n      const str = JSON.stringify(body);\n      return str.length > maxLength ? str.substring(0, maxLength) + '...[truncated]' : str;\n    }\n    \n    return String(body);\n  } catch {\n    return '[Unable to serialize body]';\n  }\n}\n\n/**\n * Check if a URL should be ignored\n */\nexport function shouldIgnore(url: string, patterns: (string | RegExp)[]): boolean {\n  for (const pattern of patterns) {\n    if (typeof pattern === 'string') {\n      if (url.includes(pattern)) return true;\n    } else if (pattern instanceof RegExp) {\n      if (pattern.test(url)) return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Parse URL to extract host and path\n */\nexport function parseUrl(url: string | URL): { host: string; path: string; full: string } {\n  try {\n    const parsed = typeof url === 'string' ? new URL(url) : url;\n    return {\n      host: parsed.host,\n      path: parsed.pathname + parsed.search,\n      full: parsed.toString(),\n    };\n  } catch {\n    return {\n      host: 'unknown',\n      path: String(url),\n      full: String(url),\n    };\n  }\n}\n\n/**\n * Get current timestamp in ISO format\n */\nexport function getTimestamp(): string {\n  return new Date().toISOString();\n}\n\n/**\n * Calculate byte size of a string\n */\nexport function getByteSize(str: string | null | undefined): number {\n  if (!str) return 0;\n  return new TextEncoder().encode(str).length;\n}\n\n/**\n * Debug logger\n */\nexport function createLogger(debug: boolean) {\n  return {\n    log: (...args: unknown[]) => {\n      if (debug) console.log('[OutboundIQ]', ...args);\n    },\n    warn: (...args: unknown[]) => {\n      if (debug) console.warn('[OutboundIQ]', ...args);\n    },\n    error: (...args: unknown[]) => {\n      // Always log errors\n      console.error('[OutboundIQ]', ...args);\n    },\n  };\n}\n\n","import type { OutboundIQConfig, ApiCall, UserContext } from '../types';\n\nexport type { OutboundIQConfig, UserContext, ApiCall } from '../types';\nimport { generateId, createLogger, shouldIgnore, getTimestamp } from '../utils/helpers';\n\nconst SDK_VERSION = '0.1.0';\n\n// For Node.js: We'll set these when we have access to the http/https modules\n// These will be set from node.ts BEFORE patching occurs\nlet nativeHttpRequest: ((options: any, callback: (res: any) => void) => any) | null = null;\nlet nativeHttpsRequest: ((options: any, callback: (res: any) => void) => any) | null = null;\n\n/**\n * Set the native http/https request functions (must be called BEFORE patching)\n * This is called from node.ts with the original http.request and https.request\n */\nexport function setNativeHttp(httpModule: any, httpsModule: any): void {\n  if (httpModule && typeof httpModule.request === 'function') {\n    nativeHttpRequest = httpModule.request.bind(httpModule);\n  }\n  if (httpsModule && typeof httpsModule.request === 'function') {\n    nativeHttpsRequest = httpsModule.request.bind(httpsModule);\n  }\n  console.log('[OutboundIQ] Native http/https modules set for metrics sending');\n}\n\n// Store original fetch as fallback for non-Node environments\nconst originalFetch: typeof fetch = typeof globalThis.fetch === 'function' \n  ? globalThis.fetch.bind(globalThis) \n  : (null as any);\n\n/**\n * Internal configuration with all required fields\n */\ninterface InternalConfig {\n  apiKey: string;\n  endpoint: string;\n  debug: boolean;\n  batchSize: number;\n  flushInterval: number;\n  timeout: number;\n  ignorePatterns: (string | RegExp)[];\n  autoTrack: boolean;\n}\n\n/**\n * Core OutboundIQ client for tracking API calls\n * \n * This client handles:\n * - Batching API calls for efficient transmission\n * - Non-blocking sends (fire-and-forget)\n * - Automatic flushing based on batch size and interval\n * - Graceful degradation (never breaks user's app)\n */\nexport class OutboundIQClient {\n  private config: InternalConfig;\n  private queue: ApiCall[] = [];\n  private flushTimer: ReturnType<typeof setInterval> | null = null;\n  private isFlushing = false;\n  private logger: ReturnType<typeof createLogger>;\n  private runtime: 'node' | 'edge' | 'browser' = 'node';\n  private currentUserContext: UserContext | null = null;\n\n  constructor(config: OutboundIQConfig) {\n    // Merge with defaults\n    this.config = {\n      endpoint: config.endpoint ?? 'https://agent.outboundiq.dev/api/metric',\n      debug: config.debug ?? false,\n      batchSize: config.batchSize ?? 10,\n      flushInterval: config.flushInterval ?? 5000,\n      timeout: config.timeout ?? 5000,\n      ignorePatterns: config.ignorePatterns ?? [],\n      autoTrack: config.autoTrack ?? true,\n      apiKey: config.apiKey,\n      // projectId is deprecated - determined from API key on backend\n    };\n\n    this.logger = createLogger(this.config.debug);\n    this.detectRuntime();\n    this.startFlushInterval();\n\n    this.logger.log('Initialized with config:', {\n      endpoint: this.config.endpoint,\n      batchSize: this.config.batchSize,\n      runtime: this.runtime,\n    });\n  }\n\n  /**\n   * Detect the current runtime environment\n   */\n  private detectRuntime(): void {\n    // Check for Edge runtime (Vercel Edge, Cloudflare Workers)\n    if (typeof (globalThis as any).EdgeRuntime !== 'undefined') {\n      this.runtime = 'edge';\n    } else if (typeof globalThis !== 'undefined' && 'window' in globalThis) {\n      this.runtime = 'browser';\n    } else {\n      this.runtime = 'node';\n    }\n  }\n\n  /**\n   * Get the configured API key\n   */\n  getApiKey(): string {\n    return this.config.apiKey;\n  }\n\n  /**\n   * Get the configured endpoint\n   */\n  getEndpoint(): string {\n    return this.config.endpoint;\n  }\n\n  /**\n   * Start the automatic flush interval\n   */\n  private startFlushInterval(): void {\n    if (this.flushTimer) return;\n\n    // Don't use setInterval in Edge runtime (short-lived)\n    if (this.runtime !== 'edge') {\n      this.flushTimer = setInterval(() => {\n        this.flush();\n      }, this.config.flushInterval);\n\n      // Unref the timer so it doesn't keep the process alive\n      if (typeof this.flushTimer === 'object' && 'unref' in this.flushTimer) {\n        this.flushTimer.unref();\n      }\n    }\n  }\n\n  /**\n   * Stop the automatic flush interval\n   */\n  private stopFlushInterval(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer);\n      this.flushTimer = null;\n    }\n  }\n\n  /**\n   * Set the user context for subsequent API calls\n   */\n  setUserContext(context: UserContext | null): void {\n    this.currentUserContext = context;\n  }\n\n  /**\n   * Get the current user context\n   */\n  getUserContext(): UserContext | null {\n    return this.currentUserContext;\n  }\n\n  /**\n   * Track an API call\n   */\n  track(call: Omit<ApiCall, 'id' | 'timestamp' | 'userContext'> & { userContext?: UserContext | null }): void {\n    // Check if URL should be ignored\n    if (shouldIgnore(call.url, this.config.ignorePatterns)) {\n      this.logger.log('Ignoring URL:', call.url);\n      return;\n    }\n\n    // Don't track calls to OutboundIQ itself\n    if (call.url.includes('outboundiq.io') || call.url.includes('outboundiq.test')) {\n      return;\n    }\n\n    const apiCall: ApiCall = {\n      ...call,\n      id: generateId(),\n      timestamp: getTimestamp(),\n      userContext: call.userContext ?? this.currentUserContext,\n    };\n\n    this.queue.push(apiCall);\n    this.logger.log('Tracked call:', apiCall.method, apiCall.url, apiCall.statusCode);\n\n    // Auto-flush if batch size reached\n    if (this.queue.length >= this.config.batchSize) {\n      this.flush();\n    }\n  }\n\n  /**\n   * Flush the queue - send all pending calls to OutboundIQ\n   * This is non-blocking and fire-and-forget\n   */\n  flush(): void {\n    if (this.queue.length === 0 || this.isFlushing) return;\n\n    // Grab current queue and reset\n    const batch = this.queue.splice(0);\n    this.isFlushing = true;\n\n    this.logger.log(`Flushing ${batch.length} calls`);\n\n    // Fire and forget - don't await\n    this.sendBatch(batch)\n      .catch((error) => {\n        this.logger.error('Failed to send batch:', error);\n        // Optionally re-queue failed calls (with limit to prevent memory issues)\n        if (this.queue.length < 100) {\n          this.queue.unshift(...batch.slice(0, 10)); // Re-queue first 10\n        }\n      })\n      .finally(() => {\n        this.isFlushing = false;\n      });\n  }\n\n  /**\n   * Convert API calls to the format expected by the backend\n   * Matches the PHP SDK's ApiCall::toArray() format\n   */\n  private formatCallsForBackend(calls: ApiCall[]): object[] {\n    return calls.map(call => ({\n      transaction_id: call.id,\n      url: call.url,\n      method: call.method,\n      duration: call.duration,\n      status_code: call.statusCode,\n      request_headers: call.requestHeaders || {},\n      request_body: call.requestBody,\n      response_headers: call.responseHeaders || {},\n      response_body: call.responseBody,\n      timestamp: new Date(call.timestamp).getTime() / 1000, // Unix timestamp\n      memory_usage: 0, // Not available in JS\n      memory_peak: 0, // Not available in JS\n      request_type: 'javascript',\n      ...(call.error && { error: { message: call.error, type: 'network' } }),\n      ...(call.userContext && { user_context: call.userContext }),\n    }));\n  }\n\n  /**\n   * Base64 encode a string (works in both Node.js and browser)\n   */\n  private base64Encode(str: string): string {\n    if (typeof Buffer !== 'undefined') {\n      // Node.js\n      return Buffer.from(str, 'utf-8').toString('base64');\n    } else {\n      // Browser\n      return btoa(unescape(encodeURIComponent(str)));\n    }\n  }\n\n  /**\n   * Send a batch of API calls to OutboundIQ\n   * \n   * The payload is base64 encoded to match the PHP SDK format.\n   * The backend decodes it and determines the project from the API key.\n   * \n   * IMPORTANT: In Node.js, we use the native https module directly to avoid\n   * any patched fetch/http issues. In browser/edge, we use fetch.\n   */\n  private async sendBatch(calls: ApiCall[]): Promise<void> {\n    // Format payload as array (same as PHP SDK)\n    const payload = this.formatCallsForBackend(calls);\n    \n    // JSON encode then base64 encode (matching PHP SDK)\n    const jsonData = JSON.stringify(payload);\n    const encodedData = this.base64Encode(jsonData);\n\n    // In Node.js, use native http/https to avoid patching issues\n    const isHttps = this.config.endpoint.startsWith('https://');\n    const nativeRequest = isHttps ? nativeHttpsRequest : nativeHttpRequest;\n    \n    if (nativeRequest && this.runtime === 'node') {\n      this.logger.log('Using native', isHttps ? 'https' : 'http', 'for metrics');\n      return this.sendWithNativeHttp(encodedData, nativeRequest, isHttps);\n    }\n    \n    this.logger.log('Using fetch for metrics (runtime:', this.runtime, ')');\n\n    // Fallback to fetch for browser/edge\n    if (!originalFetch) {\n      throw new Error('fetch is not available');\n    }\n\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.config.timeout);\n\n    try {\n      const response = await originalFetch(this.config.endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.config.apiKey}`,\n          'User-Agent': `OutboundIQ-JS/${SDK_VERSION}`,\n        },\n        body: encodedData,\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      this.logger.log('Batch sent successfully');\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new Error('Request timeout');\n      }\n      throw error;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  /**\n   * Send metrics using native Node.js http/https module\n   * This completely bypasses any patched fetch/http\n   */\n  private sendWithNativeHttp(\n    encodedData: string, \n    requestFn: (options: any, callback: (res: any) => void) => any,\n    isHttps: boolean\n  ): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const url = new URL(this.config.endpoint);\n      \n      // Skip SSL verification for local development (.test, .local, localhost)\n      const isLocalDev = url.hostname.endsWith('.test') || \n                         url.hostname.endsWith('.local') || \n                         url.hostname === 'localhost';\n      \n      const options: Record<string, unknown> = {\n        hostname: url.hostname,\n        port: url.port || (isHttps ? 443 : 80),\n        path: url.pathname + url.search,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.config.apiKey}`,\n          'User-Agent': `OutboundIQ-JS/${SDK_VERSION}`,\n          'Content-Length': Buffer.byteLength(encodedData),\n        },\n        timeout: this.config.timeout,\n        // Skip SSL verification for local development (only for https)\n        ...(isHttps && { rejectUnauthorized: !isLocalDev }),\n      };\n\n      const req = requestFn(options, (res: any) => {\n        let data = '';\n        res.on('data', (chunk: string) => { data += chunk; });\n        res.on('end', () => {\n          if (res.statusCode >= 200 && res.statusCode < 300) {\n            this.logger.log('Batch sent successfully');\n            resolve();\n          } else {\n            reject(new Error(`HTTP ${res.statusCode}: ${data}`));\n          }\n        });\n      });\n\n      req.on('error', (err: Error) => {\n        reject(err);\n      });\n\n      req.on('timeout', () => {\n        req.destroy();\n        reject(new Error('Request timeout'));\n      });\n\n      req.write(encodedData);\n      req.end();\n    });\n  }\n\n  /**\n   * Flush and shutdown the client\n   */\n  async shutdown(): Promise<void> {\n    this.stopFlushInterval();\n    \n    // Final flush - wait for it\n    if (this.queue.length > 0) {\n      const batch = this.queue.splice(0);\n      try {\n        await this.sendBatch(batch);\n      } catch (error) {\n        this.logger.error('Final flush failed:', error);\n      }\n    }\n\n    this.logger.log('Client shutdown complete');\n  }\n\n  /**\n   * Get pending queue size\n   */\n  getPendingCount(): number {\n    return this.queue.length;\n  }\n\n  /**\n   * Get configuration\n   */\n  getConfig(): Readonly<OutboundIQConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Get the base URL (endpoint without /metric)\n   */\n  getBaseUrl(): string {\n    return this.config.endpoint.replace('/metric', '');\n  }\n\n  /**\n   * Ping the OutboundIQ API to verify the API key and get project info\n   */\n  async ping(): Promise<PingResponse | null> {\n    const url = this.getBaseUrl() + '/ping';\n    \n    try {\n      if (this.runtime === 'node' && nativeHttpsRequest) {\n        return await this.pingWithNativeHttp(url);\n      }\n      \n      // Fallback to fetch\n      if (!originalFetch) {\n        throw new Error('fetch is not available');\n      }\n\n      const response = await originalFetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${this.config.apiKey}`,\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        return null;\n      }\n\n      return await response.json();\n    } catch (error) {\n      this.logger.error('Ping failed:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Ping using native Node.js https\n   */\n  private pingWithNativeHttp(url: string): Promise<PingResponse | null> {\n    return new Promise((resolve) => {\n      const parsedUrl = new URL(url);\n      const isHttps = parsedUrl.protocol === 'https:';\n      const requestFn = isHttps ? nativeHttpsRequest : nativeHttpRequest;\n      \n      if (!requestFn) {\n        resolve(null);\n        return;\n      }\n\n      const options = {\n        hostname: parsedUrl.hostname,\n        port: parsedUrl.port || (isHttps ? 443 : 80),\n        path: parsedUrl.pathname + parsedUrl.search,\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${this.config.apiKey}`,\n          'Accept': 'application/json',\n        },\n        timeout: this.config.timeout,\n      };\n\n      const req = requestFn(options, (res: any) => {\n        let data = '';\n        res.on('data', (chunk: string) => { data += chunk; });\n        res.on('end', () => {\n          if (res.statusCode >= 200 && res.statusCode < 300) {\n            try {\n              resolve(JSON.parse(data));\n            } catch {\n              resolve(null);\n            }\n          } else {\n            resolve(null);\n          }\n        });\n      });\n\n      req.on('error', () => resolve(null));\n      req.on('timeout', () => {\n        req.destroy();\n        resolve(null);\n      });\n      req.end();\n    });\n  }\n}\n\n/**\n * Ping response from OutboundIQ API\n */\nexport interface PingResponse {\n  status: boolean;\n  message: string;\n  data: {\n    project: {\n      name: string;\n      slug: string;\n    };\n    team: {\n      name: string;\n    };\n    plan: string;\n    usage: {\n      api_calls: number;\n      limit: number;\n    };\n    timestamp: string;\n  } | null;\n}\n\n// Singleton instance for easy access\nlet instance: OutboundIQClient | null = null;\n\n/**\n * Initialize the OutboundIQ client\n */\nexport function init(config: OutboundIQConfig): OutboundIQClient {\n  if (instance) {\n    console.warn('[OutboundIQ] Client already initialized. Returning existing instance.');\n    return instance;\n  }\n  instance = new OutboundIQClient(config);\n  return instance;\n}\n\n/**\n * Get the OutboundIQ client instance\n */\nexport function getClient(): OutboundIQClient | null {\n  return instance;\n}\n\n/**\n * Track an API call using the global instance\n */\nexport function track(call: Parameters<OutboundIQClient['track']>[0]): void {\n  if (!instance) {\n    console.warn('[OutboundIQ] Client not initialized. Call init() first.');\n    return;\n  }\n  instance.track(call);\n}\n\n/**\n * Set user context for subsequent calls\n */\nexport function setUserContext(context: UserContext | null): void {\n  if (!instance) {\n    console.warn('[OutboundIQ] Client not initialized. Call init() first.');\n    return;\n  }\n  instance.setUserContext(context);\n}\n\n/**\n * Flush pending calls\n */\nexport function flush(): void {\n  instance?.flush();\n}\n\n/**\n * Shutdown the client\n */\nexport async function shutdown(): Promise<void> {\n  await instance?.shutdown();\n  instance = null;\n}\n\n/**\n * Ping the OutboundIQ API to verify the API key\n */\nexport async function ping(): Promise<PingResponse | null> {\n  if (!instance) {\n    console.warn('[OutboundIQ] Client not initialized. Call init() first.');\n    return null;\n  }\n  return instance.ping();\n}\n\n","/**\n * Fetch interceptor for Edge runtime and modern Node.js\n * \n * This patches the global fetch function to intercept outbound requests.\n * Works in Edge Runtime (Vercel, Cloudflare Workers) and Node.js 18+.\n */\n\nimport { getClient } from '../client/OutboundIQClient';\nimport { sanitizeHeaders, safeStringify, getByteSize } from '../utils/helpers';\nimport type { UserContext } from '../types';\n\n// Store original fetch\nlet originalFetch: typeof fetch | null = null;\nlet isPatched = false;\n\n// User context resolver function\nlet userContextResolver: (() => UserContext | null) | null = null;\n\n/**\n * Set the user context resolver function\n */\nexport function setFetchUserContextResolver(resolver: () => UserContext | null): void {\n  userContextResolver = resolver;\n}\n\n/**\n * Extract headers from Request or RequestInit\n */\nfunction extractRequestHeaders(\n  input: RequestInfo | URL,\n  init?: RequestInit\n): Record<string, string> {\n  const headers: Record<string, string> = {};\n\n  // From init.headers\n  if (init?.headers) {\n    if (init.headers instanceof Headers) {\n      init.headers.forEach((value, key) => {\n        headers[key] = value;\n      });\n    } else if (Array.isArray(init.headers)) {\n      init.headers.forEach(([key, value]) => {\n        headers[key] = value;\n      });\n    } else {\n      Object.assign(headers, init.headers);\n    }\n  }\n\n  // From Request object\n  if (input instanceof Request) {\n    input.headers.forEach((value, key) => {\n      if (!headers[key]) {\n        headers[key] = value;\n      }\n    });\n  }\n\n  return headers;\n}\n\n/**\n * Get URL from fetch input\n */\nfunction getUrl(input: RequestInfo | URL): string {\n  if (typeof input === 'string') {\n    return input;\n  }\n  if (input instanceof URL) {\n    return input.toString();\n  }\n  if (input instanceof Request) {\n    return input.url;\n  }\n  return String(input);\n}\n\n/**\n * Get method from fetch input\n */\nfunction getMethod(input: RequestInfo | URL, init?: RequestInit): string {\n  if (init?.method) {\n    return init.method.toUpperCase();\n  }\n  if (input instanceof Request) {\n    return input.method.toUpperCase();\n  }\n  return 'GET';\n}\n\n/**\n * Safely read body from Request or RequestInit\n */\nasync function getRequestBody(\n  input: RequestInfo | URL,\n  init?: RequestInit\n): Promise<string | null> {\n  try {\n    if (init?.body) {\n      if (typeof init.body === 'string') {\n        return init.body.substring(0, 5000);\n      }\n      if (init.body instanceof FormData) {\n        return '[FormData]';\n      }\n      if (init.body instanceof URLSearchParams) {\n        return init.body.toString().substring(0, 5000);\n      }\n      if (init.body instanceof ArrayBuffer || init.body instanceof Uint8Array) {\n        return `[Binary: ${init.body.byteLength} bytes]`;\n      }\n      return '[Body Stream]';\n    }\n\n    if (input instanceof Request && input.body) {\n      // Can't read body without consuming it\n      return '[Request Body]';\n    }\n\n    return null;\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Safely read response body\n */\nasync function getResponseBody(response: Response): Promise<string | null> {\n  try {\n    // Clone to not consume the original\n    const clone = response.clone();\n    const text = await clone.text();\n    return text.substring(0, 5000);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Patch global fetch\n */\nexport function patchFetch(): void {\n  if (isPatched || typeof globalThis.fetch !== 'function') {\n    return;\n  }\n\n  originalFetch = globalThis.fetch;\n\n  globalThis.fetch = async function patchedFetch(\n    input: RequestInfo | URL,\n    init?: RequestInit\n  ): Promise<Response> {\n    const startTime = performance.now();\n    const url = getUrl(input);\n    const method = getMethod(input, init);\n\n    // Skip tracking OutboundIQ calls (don't track our own metrics sending)\n    if (url.includes('outboundiq.dev') || url.includes('outboundiq.io') || url.includes('outboundiq.test') || url.includes('outboundiq.com')) {\n      return originalFetch!(input, init);\n    }\n\n    // Get user context before the request\n    const userContext = userContextResolver?.() ?? null;\n    const requestHeaders = extractRequestHeaders(input, init);\n    const requestBody = await getRequestBody(input, init);\n\n    let response: Response;\n    let error: Error | null = null;\n\n    try {\n      response = await originalFetch!(input, init);\n    } catch (err) {\n      error = err instanceof Error ? err : new Error(String(err));\n      \n      // Track failed request\n      const client = getClient();\n      if (client) {\n        client.track({\n          method,\n          url,\n          statusCode: 0,\n          duration: performance.now() - startTime,\n          requestHeaders: sanitizeHeaders(requestHeaders),\n          requestBody: safeStringify(requestBody),\n          error: error.message,\n          userContext,\n        });\n      }\n\n      throw err;\n    }\n\n    // Track successful request (fire and forget)\n    const duration = performance.now() - startTime;\n    \n    // Don't await - track in background\n    (async () => {\n      try {\n        const responseBody = await getResponseBody(response);\n        const client = getClient();\n        if (client) {\n          client.track({\n            method,\n            url,\n            statusCode: response.status,\n            duration,\n            requestHeaders: sanitizeHeaders(requestHeaders),\n            responseHeaders: sanitizeHeaders(Object.fromEntries(response.headers.entries())),\n            requestBody: safeStringify(requestBody),\n            responseBody: safeStringify(responseBody),\n            requestSize: getByteSize(requestBody),\n            responseSize: getByteSize(responseBody),\n            userContext,\n          });\n        }\n      } catch {\n        // Silently fail - never break user's app\n      }\n    })();\n\n    return response;\n  };\n\n  isPatched = true;\n  console.log('[OutboundIQ] Fetch patched');\n}\n\n/**\n * Restore original fetch\n */\nexport function unpatchFetch(): void {\n  if (!isPatched || !originalFetch) {\n    return;\n  }\n\n  globalThis.fetch = originalFetch;\n  originalFetch = null;\n  isPatched = false;\n  console.log('[OutboundIQ] Fetch restored');\n}\n\n/**\n * Check if fetch is patched\n */\nexport function isFetchPatched(): boolean {\n  return isPatched;\n}\n\n","/**\n * API Intelligence Methods\n * \n * Smart routing and health check functions for making intelligent\n * decisions about which API providers/endpoints to use.\n */\n\nimport type { UserContext } from './types';\nimport { getClient } from './client/OutboundIQClient';\n\n// Store for original fetch (to avoid recursion with patched fetch)\nconst originalFetch = globalThis.fetch;\n\n/**\n * Get the base URL for the OutboundIQ API\n */\nfunction getBaseUrl(): string {\n  // Try to get from initialized client first\n  const client = getClient();\n  if (client) {\n    return client.getEndpoint().replace('/api/metric', '/api');\n  }\n  // Fall back to env var\n  const endpoint = process.env.OUTBOUNDIQ_ENDPOINT || 'https://agent.outboundiq.dev/api/metric';\n  return endpoint.replace('/api/metric', '/api');\n}\n\n/**\n * Get API key from initialized client or environment\n */\nfunction getApiKey(): string | undefined {\n  // Try to get from initialized client first\n  const client = getClient();\n  if (client) {\n    return client.getApiKey();\n  }\n  // Fall back to env var\n  return process.env.OUTBOUNDIQ_KEY;\n}\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface RecommendationResult {\n  success: boolean;\n  decision?: {\n    action: 'proceed' | 'use_alternative' | 'delay' | 'abort';\n    reason: string;\n    confidence: number;\n  };\n  recommendation?: {\n    provider: string;\n    endpoint: string;\n    confidence: number;\n    reason: string;\n  };\n  alternatives?: Array<{\n    provider: string;\n    endpoint: string;\n    confidence: number;\n    reason: string;\n  }>;\n  error?: string;\n}\n\nexport interface ProviderStatusResult {\n  success: boolean;\n  decision?: {\n    action: 'proceed' | 'use_alternative' | 'delay' | 'abort';\n    reason: string;\n    confidence: number;\n  };\n  provider?: {\n    name: string;\n    slug: string;\n  };\n  metrics?: {\n    success_rate: number;\n    avg_latency: number;\n    total_calls: number;\n    error_rate: number;\n  };\n  status?: {\n    current: 'operational' | 'degraded' | 'partial_outage' | 'major_outage' | 'unknown';\n    description: string;\n    updated_at: string;\n  };\n  incidents?: Array<{\n    id: string;\n    name: string;\n    status: string;\n    impact: string;\n    created_at: string;\n  }>;\n  components?: Array<{\n    name: string;\n    status: string;\n  }>;\n  error?: string;\n}\n\nexport interface EndpointStatusResult {\n  success: boolean;\n  decision?: {\n    action: 'proceed' | 'use_alternative' | 'delay' | 'abort';\n    reason: string;\n    confidence: number;\n  };\n  endpoint?: {\n    name: string;\n    slug: string;\n    method: string;\n    pattern: string;\n  };\n  provider?: {\n    name: string;\n    slug: string;\n  };\n  metrics?: {\n    success_rate: number;\n    avg_latency: number;\n    total_calls: number;\n    error_rate: number;\n    p95_latency?: number;\n    schema_stability?: number;\n    latency_trend?: 'improving' | 'stable' | 'degrading';\n  };\n  status?: {\n    current: 'operational' | 'degraded' | 'partial_outage' | 'major_outage' | 'unknown';\n    description: string;\n  };\n  incidents?: Array<{\n    id: string;\n    name: string;\n    status: string;\n    impact: string;\n  }>;\n  components?: Array<{\n    name: string;\n    status: string;\n  }>;\n  error?: string;\n}\n\nexport interface IntelligenceOptions {\n  userContext?: UserContext;\n  timeout?: number;\n}\n\n// ============================================================================\n// API Intelligence Functions\n// ============================================================================\n\n/**\n * Get a smart recommendation for which provider/endpoint to use for a service.\n * \n * @param serviceName - The service slug (e.g., 'payment-processing', 'sms-notifications')\n * @param options - Optional configuration\n * @returns Recommendation with decision, confidence score, and alternatives\n * \n * @example\n * ```typescript\n * import { recommend } from '@outboundiq/core';\n * \n * const result = await recommend('payment-processing');\n * \n * if (result?.decision?.action === 'proceed') {\n *   // Use the recommended provider\n *   const provider = result.recommendation?.provider;\n *   console.log(`Using ${provider} with ${result.recommendation?.confidence}% confidence`);\n * } else if (result?.decision?.action === 'use_alternative') {\n *   // Primary is having issues, use alternative\n *   const alt = result.alternatives?.[0];\n *   console.log(`Switching to ${alt?.provider}`);\n * }\n * ```\n */\nexport async function recommend(\n  serviceName: string,\n  options: IntelligenceOptions = {}\n): Promise<RecommendationResult | null> {\n  const apiKey = getApiKey();\n  \n  if (!apiKey) {\n    console.warn('[OutboundIQ] Missing OUTBOUNDIQ_KEY for recommend()');\n    return null;\n  }\n\n  try {\n    const url = `${getBaseUrl()}/v1/recommend/${encodeURIComponent(serviceName)}`;\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${apiKey}`,\n      'Accept': 'application/json',\n    };\n\n    if (options.userContext) {\n      headers['X-User-Context'] = JSON.stringify(options.userContext);\n    }\n\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), options.timeout || 5000);\n\n    const response = await originalFetch(url, {\n      method: 'GET',\n      headers,\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n\n    const data = await response.json();\n    return { success: response.ok, ...data };\n  } catch (error) {\n    if (error instanceof Error && error.name === 'AbortError') {\n      console.error('[OutboundIQ] recommend() timeout');\n      return { success: false, error: 'Request timeout' };\n    }\n    console.error('[OutboundIQ] recommend() failed:', error);\n    return { success: false, error: (error as Error).message };\n  }\n}\n\n/**\n * Get the current status and health metrics for a provider.\n * \n * @param providerSlug - The provider slug (e.g., 'stripe', 'twilio', 'sendgrid')\n * @param options - Optional configuration\n * @returns Provider status with metrics, incidents, and decision\n * \n * @example\n * ```typescript\n * import { providerStatus } from '@outboundiq/core';\n * \n * const status = await providerStatus('stripe');\n * \n * if (status?.decision?.action === 'abort') {\n *   // Stripe is having major issues\n *   console.log(`Stripe issue: ${status.decision.reason}`);\n *   // Switch to backup payment provider\n * } else if (status?.metrics) {\n *   console.log(`Stripe success rate: ${status.metrics.success_rate}%`);\n *   console.log(`Average latency: ${status.metrics.avg_latency}ms`);\n * }\n * ```\n */\nexport async function providerStatus(\n  providerSlug: string,\n  options: IntelligenceOptions = {}\n): Promise<ProviderStatusResult | null> {\n  const apiKey = getApiKey();\n  \n  if (!apiKey) {\n    console.warn('[OutboundIQ] Missing OUTBOUNDIQ_KEY for providerStatus()');\n    return null;\n  }\n\n  try {\n    const url = `${getBaseUrl()}/v1/provider/${encodeURIComponent(providerSlug)}/status`;\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${apiKey}`,\n      'Accept': 'application/json',\n    };\n\n    if (options.userContext) {\n      headers['X-User-Context'] = JSON.stringify(options.userContext);\n    }\n\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), options.timeout || 5000);\n\n    const response = await originalFetch(url, {\n      method: 'GET',\n      headers,\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n\n    const data = await response.json();\n    return { success: response.ok, ...data };\n  } catch (error) {\n    if (error instanceof Error && error.name === 'AbortError') {\n      console.error('[OutboundIQ] providerStatus() timeout');\n      return { success: false, error: 'Request timeout' };\n    }\n    console.error('[OutboundIQ] providerStatus() failed:', error);\n    return { success: false, error: (error as Error).message };\n  }\n}\n\n/**\n * Get the current status and health metrics for a specific endpoint.\n * \n * @param endpointSlug - The endpoint slug (e.g., 'stripe-post-charges', 'twilio-post-messages')\n * @param options - Optional configuration\n * @returns Endpoint status with metrics, incidents, and decision\n * \n * @example\n * ```typescript\n * import { endpointStatus } from '@outboundiq/core';\n * \n * const status = await endpointStatus('stripe-post-charges');\n * \n * if (status?.decision?.action === 'delay') {\n *   // Endpoint is slow, maybe wait before retrying\n *   console.log(`Stripe charges slow: ${status.metrics?.avg_latency}ms`);\n * }\n * \n * // Check for degraded performance\n * if (status?.metrics?.latency_trend === 'degrading') {\n *   console.log('Latency is trending upward');\n * }\n * ```\n */\nexport async function endpointStatus(\n  endpointSlug: string,\n  options: IntelligenceOptions = {}\n): Promise<EndpointStatusResult | null> {\n  const apiKey = getApiKey();\n  \n  if (!apiKey) {\n    console.warn('[OutboundIQ] Missing OUTBOUNDIQ_KEY for endpointStatus()');\n    return null;\n  }\n\n  try {\n    const url = `${getBaseUrl()}/v1/endpoint/${encodeURIComponent(endpointSlug)}/status`;\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${apiKey}`,\n      'Accept': 'application/json',\n    };\n\n    if (options.userContext) {\n      headers['X-User-Context'] = JSON.stringify(options.userContext);\n    }\n\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), options.timeout || 5000);\n\n    const response = await originalFetch(url, {\n      method: 'GET',\n      headers,\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n\n    const data = await response.json();\n    return { success: response.ok, ...data };\n  } catch (error) {\n    if (error instanceof Error && error.name === 'AbortError') {\n      console.error('[OutboundIQ] endpointStatus() timeout');\n      return { success: false, error: 'Request timeout' };\n    }\n    console.error('[OutboundIQ] endpointStatus() failed:', error);\n    return { success: false, error: (error as Error).message };\n  }\n}\n\n"]}